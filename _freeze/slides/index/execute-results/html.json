{
  "hash": "40de26a7295f4c951f2030bec574ba02",
  "result": {
    "markdown": "---\ntitle: \"Data Cleaning\"\nauthor: \"Crystal Lewis, Shannon Pileggi, Peter Higgins, & Duncan Garmonsway\"\nfooter: \"[Data Cleaning](https://shannonpileggi.github.io/rmedicine-data-cleaning-2023)\"\nlogo: \"images/R-Med-logo-revised-pride.png\"\neditor: source\nformat: \n  revealjs: \n    theme: slides.scss\n    transition: fade\n    slide-number: true\n    chalkboard: true\nexecute:\n  echo: true\n  output: asis\n  freeze: auto\ncache: true\n---\n# Introduction\n\n\n\n## Licensing\n\n<br>\n\nThis work is licensed under [Creative Commons Zero v1.0 Universal](https://creativecommons.org/publicdomain/zero/1.0/).\n\n\n## Instructors\n\n::: columns\n::: {.column width=\"50%\"}\n**Crystal Lewis**\n\n![](images/Crystal_circle.png){width=\"40%\"}\n\n**Shannon Pileggi**\n\n![](images/Shannon_circle.png){width=\"40%\"}\n:::\n\n::: {.column width=\"50%\"}\n**Peter Higgins**\n\n![](images/Peter_circle.jpg){width=\"40%\"}\n\n\n**Duncan Garmonsway**\n\n![](images/Shannon_circle.png){width=\"40%\"}\n\n:::\n:::\n\n\n## Checklist\n\n<br>\n\n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 512 512\" style=\"height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#606060;overflow:visible;position:relative;\"><path d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} Install recent R release\n\n    Current version 4.2.1\n\n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 512 512\" style=\"height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#606060;overflow:visible;position:relative;\"><path d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} Install RStudio\n\n    I am on version 2022.07.1+554 \n\n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 512 512\" style=\"height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#606060;overflow:visible;position:relative;\"><path d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} Install packages\n\n``` r\n# install.packages(c(\"gtreg\", \"gtsummary\", \"tidyverse\", \"labelled\", \"usethis\"))\n```\n\n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 512 512\" style=\"height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#606060;overflow:visible;position:relative;\"><path d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} Ensure you can knit Rmarkdown files\n\n## Schedule\n\n| Time          | Activity           |\n|:--------------|:-------------------|\n| 09:00 - 09:50 | Section 1          |\n| 09:50 - 10:00 | *Break*            |\n| 10:00 - 10:50 | Section 2          |\n| 10:50 - 11:00 | *Break*            |\n| 11:00 - 12:00 | Section 3          |\n\n<br>\n\nPlease add any questions to the public Zoom chat. These may be answered in the \nmoment or addressed at the end depending on context.\n\n\n# Crystal Section A\n\n## Slide 1\n\n## Slide 2\n\n# Crystal Section B\n\n## Slide 1\n\n## Slide 2\n\n# Stage 1 cleaning\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-2_68643e261314d1023fe839e9962211fd'}\n\n:::\n\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-3_9164fe0ec0f16513205dd06955a7fcf5'}\n\n:::\n\n## new thing\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-4_70681a0f6f270a9a472fbf0aa6fbf5f9'}\n\n```{.r .cell-code}\nmtcars |> tibble::as_tibble()\n```\n\n# A tibble: 32 √ó 11\n     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>\n 1  21       6  160    110  3.9   2.62  16.5     0     1     4     4\n 2  21       6  160    110  3.9   2.88  17.0     0     1     4     4\n 3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1\n 4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1\n 5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2\n 6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1\n 7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4\n 8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2\n 9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2\n10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4\n# ‚Ñπ 22 more rows\n:::\n\n## Variable names\n\nOriginal variable names in excel: \n\n![](images/var_names_1.PNG)\n. . .\n\nVariable names import as shown, with modifications from `readxl::read_excel()` to ensure uniqueness:\n\n![](images/var_names_2.PNG)\n\n\n\n## Variable names, cleaner\n\nVariable names as imported:\n\n![](images/var_names_2.PNG)\n\n. . .\n\n`janitor::clean_names()` removes special characters and implements snake case by default:\n\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-5_6ba1a645a36202ce0e6219ee3f6f60e4'}\n\n```{.r .cell-code}\ndf_raw |> janitor::clean_names() \n```\n:::\n\n![](images/var_names_3.PNG)\n\n## Recoding\n\n::: panel-tabset\n\n### Problem\n\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-6_cfc890282c14808d4da3b119b51449a2'}\n\n```{.r .cell-code}\ndf_clean <- df_raw |>\n  janitor::clean_names()\n\ndf_clean |> \n  count(ethnic)\n```\n\n# A tibble: 6 √ó 2\n  ethnic           n\n  <chr>        <int>\n1 Hispanic         1\n2 NOT hispanic     1\n3 hispamnic        1\n4 hispanic         3\n5 not hispanic    24\n6 <NA>             1\n:::\n\n### Solution\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-7_ca9e2e58edf5d75b268986d008d957e8'}\n\n```{.r .cell-code}\ndf_clean <- df_raw |>\n  janitor::clean_names() |> \n  mutate(\n    ethnic_clean = case_when(\n      ethnic %in%  c(\"hispanic\", \"Hispanic\", \"hispamnic\") ~ \"hispanic\",\n      ethnic %in%  c(\"NOT hispanic\", \"not hispanic\") ~ \"not hispanic\",\n    )\n  )\n\ndf_clean |> \n  count(ethnic_clean)\n```\n\n# A tibble: 3 √ó 2\n  ethnic_clean     n\n  <chr>        <int>\n1 hispanic         5\n2 not hispanic    25\n3 <NA>             1\n:::\n\n\n### Confirm\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-8_602fd42e34dfec81565887e1b8481244'}\n\n```{.r .cell-code}\ndf_clean |> \n  count(ethnic_clean, ethnic)\n```\n\n# A tibble: 6 √ó 3\n  ethnic_clean ethnic           n\n  <chr>        <chr>        <int>\n1 hispanic     Hispanic         1\n2 hispanic     hispamnic        1\n3 hispanic     hispanic         3\n4 not hispanic NOT hispanic     1\n5 not hispanic not hispanic    24\n6 <NA>         <NA>             1\n:::\n\n:::\n\n\n\n\n## Slide 1\n\n## Slide 2\n\n# Wrangling your Data\n\n## Deciding on the Unit of Observation\n\nImage\n\n## Is it the Patient?\n\n- Patient over time\n- Outcome colectomy\n- labs over time\n \n## Is it the Visit/Encounter?\n\n- Patient over time\n- Outcome colectomy\n- labs over time\n\n## Reshaping your data with tidyr\n\n## Pivoting Longer (common)\n\n- Visit Dates/Measures\n\n- Your Turn (Exercise)\n\n## Pivoting Wider\n\n# Filling in Unobserved Dates/Times with padr\n\n## Padding unobserved dates (weekends?)\n\n## Padding unovserved times\n\n## Joins of data from different sources\n\n## Local Demographics with CDC SVI data (one to one)\n\n## Patient Demographics with Lab results (one to many)\n\n\n# Duncan Section A\n\n## Slide 1\n\n## Slide 2\n\n# Duncan Section B\n\n## Slide 1\n\n## Slide 2\n\n## Thank you!\n\nüôè [Click here to submit workshop feedback](https://forms.gle/kvEirN7sJmavem8q6){target=\"_blank\"}\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}