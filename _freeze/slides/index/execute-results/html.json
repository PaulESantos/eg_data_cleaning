{
  "hash": "07126177c53f0deb1d808a188e590ec4",
  "result": {
    "markdown": "---\ntitle: \"Data Cleaning\"\nauthor: \"Crystal Lewis, Shannon Pileggi, & Peter Higgins\"\nfooter: \"[Data Cleaning](https://shannonpileggi.github.io/rmedicine-data-cleaning-2023)\"\nlogo: \"images/R-Med-logo-revised-pride.png\"\neditor: source\nformat: \n  revealjs: \n    theme: slides.scss\n    transition: fade\n    slide-number: true\n    chalkboard: true\nexecute:\n  echo: true\n  freeze: auto\ncache: true\n---\n# Introduction\n\n::: {.cell}\n\n:::\n\n## Licensing\n\n<br>\n\nThis work is licensed under [Creative Commons Zero v1.0 Universal](https://creativecommons.org/publicdomain/zero/1.0/).\n\n\n## Instructors\n\n::: columns\n::: {.column width=\"33%\"}\n**Crystal Lewis**\n\n![](images/Crystal_circle.png){width=\"70%\"}\n\n:::\n::: {.column width=\"33%\"}\n**Shannon Pileggi**\n\n![](images/Shannon_circle.png){width=\"70%\"}\n:::\n\n::: {.column width=\"33%\"}\n**Peter Higgins**\n\n![](images/Peter_circle.jpg){width=\"70%\"}\n\n\n\n:::\n:::\n\n\n## Checklist\n\n<br>\n\n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#606060;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} Install recent R release\n\n    Current version 4.3.0\n\n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#606060;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} Install RStudio\n\n    I am on version 2022.07.1+554 \n\n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#606060;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} Install packages\n\n``` r\n# install.packages(c(\"gtreg\", \"gtsummary\", \"tidyverse\", \"labelled\", \"usethis\"))\n```\n\n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#606060;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} Ensure you can knit Rmarkdown files\n\n## Schedule\n\n| Time          | Activity           |\n|:--------------|:-------------------|\n| 09:00 - 09:50 | Section 1          |\n| 09:50 - 10:00 | *Break*            |\n| 10:00 - 10:50 | Section 2          |\n| 10:50 - 11:00 | *Break*            |\n| 11:00 - 12:00 | Section 3          |\n\n<br>\n\nPlease add any questions to the public Zoom chat. These may be answered in the \nmoment or addressed at the end depending on context.\n\n\n# Crystal Section A\n\n## Slide 1\n\n## Slide 2\n\n# Crystal Section B\n\n## Slide 1\n\n## Slide 2\n\n# Stage 1 cleaning\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-2_1a098d13f56fbeee6a04450395cc3aac'}\n\n:::\n\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-3_f2ce1cecded57c226a27faa973d1d7b3'}\n\n:::\n\n\n\n## Variable names\n\nOriginal variable names in excel: \n\n![](images/var_names_1.PNG)\n\n. . .\n\n<br>\n\nVariable names import as shown, with modifications from `readxl::read_excel()` to ensure uniqueness:\n\n![](images/var_names_2.PNG)\n\n\n\n## Variable names, cleaner\n\nVariable names as imported:\n\n![](images/var_names_2.PNG)\n\n. . .\n\n<br>\n\n`janitor::clean_names()` removes special characters and implements snake case by default:\n\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-4_7517b61fa48af80cc3a387cbe1e141d4'}\n\n```{.r .cell-code}\ndf_clean <- df_raw |> \n  janitor::clean_names() \n```\n:::\n\n![](images/var_names_3.PNG)\n\n## Remove empty columns or rows\n\n\n::: panel-tabset\n\n### Problem\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-5_2f065d3e523435066407697f3a1d75ba'}\n\n```{.r .cell-code}\ndf_clean |> \n  select(pat_id, race:start_bp) |> \n  slice(13:18)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 5\n  pat_id race             dob                 x7    start_bp\n  <chr>  <chr>            <dttm>              <lgl> <chr>   \n1 013    Caucasian        1948-02-27 00:00:00 NA    118/73  \n2 014    African-American 1966-04-22 00:00:00 NA    106/59  \n3 015    H/API            1978-08-11 00:00:00 NA    112/69  \n4 <NA>   <NA>             NA                  NA    <NA>    \n5 016    African-American 1998-10-28 00:00:00 NA    114/76  \n6 017    Caucasian        2001-01-09 00:00:00 NA    124/80  \n```\n:::\n:::\n\n### Solution\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-6_42567eb08ed52eb43628fb31d4e6d835'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\ndf_clean <- df_raw |> \n  janitor::clean_names() |> \n  janitor::remove_empty(which = c(\"rows\", \"cols\"))\n```\n:::\n\n<br>\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-7_9011f746c78a31f52fd5462f0cfc1e1b'}\n\n```{.r .cell-code}\ndf_clean |> \n  select(pat_id, race:start_bp) |> \n  slice(13:18)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n  pat_id race             dob                 start_bp\n  <chr>  <chr>            <dttm>              <chr>   \n1 013    Caucasian        1948-02-27 00:00:00 118/73  \n2 014    African-American 1966-04-22 00:00:00 106/59  \n3 015    H/API            1978-08-11 00:00:00 112/69  \n4 016    African-American 1998-10-28 00:00:00 114/76  \n5 017    Caucasian        2001-01-09 00:00:00 124/80  \n6 018    Caucasian        1994-03-07 00:00:00 120/68  \n```\n:::\n:::\n\n### Confirm\n\n::: columns\n::: {.column width=\"35%\"}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-8_e7ea0710c56119f163181d4187ff1ab5'}\n\n```{.r .cell-code}\n#\ndf_raw |>\n  janitor::clean_names() |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 31\nColumns: 38\n$ pat_id                           <chr> \"001\", \"002\", \"003\", \"004\", \"005\", \"0…\n$ treatment                        <chr> \"upa\", \"uste\", \"oza\", \"upa\", \"oza\", \"…\n$ start_date                       <dbl> 44208, 44215, 44230, 44245, 44255, 44…\n$ ethnic                           <chr> \"hispanic\", \"not hispanic\", \"not hisp…\n$ race                             <chr> \"Caucasian\", \"Caucasian\", \"African-Am…\n$ dob                              <dttm> 2005-01-07, 1937-04-13, 1946-06-06, …\n$ x7                               <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ start_bp                         <chr> \"114/72\", \"132/86\", \"124/92\", \"144/83…\n$ pre_post_wt_kg                   <chr> \"84/82\", \"77/77\", \"74/75\", \"66/65\", \"…\n$ start_mes                        <dbl> 3, 2, 1, 3, 3, 2, 3, 3, 2, 3, 3, 3, 3…\n$ start_bss                        <dbl> 75.45589, 53.62239, 25.52527, 79.3659…\n$ start_abd_score                  <dbl> 80.59025, 53.64479, 26.15548, 77.9491…\n$ start_sys                        <dbl> 81.45415, 52.60911, 27.55523, 79.8218…\n$ start_coping                     <dbl> 50.41090, 29.56833, 15.20377, 51.2653…\n$ start_emo                        <dbl> 73.32378, 55.72461, 36.56135, 80.7601…\n$ daily_life_impact_score_at_start <dbl> 86.88945, 56.10371, 31.38942, 84.8523…\n$ start_wbc                        <dbl> 8.2, 10.1, 5.5, 4.7, 8.9, 9.3, 5.6, 9…\n$ start_plt                        <chr> \"273K/microL\", \"414K/microL\", \"323K/m…\n$ start_na                         <chr> \"137mmol/L\", \"142mmol/L\", \"140mmol/L\"…\n$ start_k                          <chr> \"3.7\", \"4.0999999999999996\", \"4.3\", \"…\n$ end_month                        <dbl> 6, 6, 7, 7, 7, 8, 8, 8, 8, 8, 9, 9, 9…\n$ end_day                          <dbl> 14, 21, 6, 22, 30, 4, 10, 15, 22, 26,…\n$ end_year                         <dbl> 2021, 2021, 2021, 2021, 2021, 2021, 2…\n$ end_mes                          <dbl> 0, 1, 1, 1, 2, 1, 2, 2, 0, 1, 0, 1, 1…\n$ end_bss                          <dbl> 9.455894, 31.622388, 25.525267, 35.36…\n$ end_abd                          <dbl> 20.590252, 33.644791, 26.155480, 37.9…\n$ end_sys                          <dbl> 9.454153, 28.609114, 27.555232, 31.82…\n$ end_coping                       <dbl> 23.41090, 20.56833, 15.20377, 33.2653…\n$ end_emo                          <chr> \"31.980531232702354\", \"43.15496159247…\n$ end_dl                           <chr> \"6.6605585857717573\", \"30.53917899804…\n$ end_wbc                          <dbl> 8.562208, 11.135466, 3.000000, 5.6919…\n$ end_plt                          <dbl> 201, 340, 256, 327, 432, 348, 181, 12…\n$ end_na                           <dbl> 137.3278, 142.2140, 140.0831, 139.158…\n$ end_k                            <dbl> 3.741212, 4.148464, 4.471147, 3.64134…\n$ fake_street                      <chr> \"990 Mohammad Mountain\", \"8512 O'Conn…\n$ fake_city                        <chr> \"North Sigmundville\", \"Port Halstad\",…\n$ fake_state                       <chr> \"New Mexico\", \"Missouri\", \"South Caro…\n$ fake_zip                         <dbl> 96074, 11264, 57246, 31457, 30711, 52…\n```\n:::\n:::\n:::\n\n::: {.column width=\"65%\"}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-9_480e7cf057b52dcaca9d6f4fb687d5bf'}\n\n```{.r .cell-code}\ndf_raw |> \n  janitor::clean_names() |> \n  janitor::remove_empty(which = c(\"rows\", \"cols\")) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 30\nColumns: 37\n$ pat_id                           <chr> \"001\", \"002\", \"003\", \"004\", \"005\", \"0…\n$ treatment                        <chr> \"upa\", \"uste\", \"oza\", \"upa\", \"oza\", \"…\n$ start_date                       <dbl> 44208, 44215, 44230, 44245, 44255, 44…\n$ ethnic                           <chr> \"hispanic\", \"not hispanic\", \"not hisp…\n$ race                             <chr> \"Caucasian\", \"Caucasian\", \"African-Am…\n$ dob                              <dttm> 2005-01-07, 1937-04-13, 1946-06-06, …\n$ start_bp                         <chr> \"114/72\", \"132/86\", \"124/92\", \"144/83…\n$ pre_post_wt_kg                   <chr> \"84/82\", \"77/77\", \"74/75\", \"66/65\", \"…\n$ start_mes                        <dbl> 3, 2, 1, 3, 3, 2, 3, 3, 2, 3, 3, 3, 3…\n$ start_bss                        <dbl> 75.45589, 53.62239, 25.52527, 79.3659…\n$ start_abd_score                  <dbl> 80.59025, 53.64479, 26.15548, 77.9491…\n$ start_sys                        <dbl> 81.45415, 52.60911, 27.55523, 79.8218…\n$ start_coping                     <dbl> 50.41090, 29.56833, 15.20377, 51.2653…\n$ start_emo                        <dbl> 73.32378, 55.72461, 36.56135, 80.7601…\n$ daily_life_impact_score_at_start <dbl> 86.88945, 56.10371, 31.38942, 84.8523…\n$ start_wbc                        <dbl> 8.2, 10.1, 5.5, 4.7, 8.9, 9.3, 5.6, 9…\n$ start_plt                        <chr> \"273K/microL\", \"414K/microL\", \"323K/m…\n$ start_na                         <chr> \"137mmol/L\", \"142mmol/L\", \"140mmol/L\"…\n$ start_k                          <chr> \"3.7\", \"4.0999999999999996\", \"4.3\", \"…\n$ end_month                        <dbl> 6, 6, 7, 7, 7, 8, 8, 8, 8, 8, 9, 9, 9…\n$ end_day                          <dbl> 14, 21, 6, 22, 30, 4, 10, 15, 22, 26,…\n$ end_year                         <dbl> 2021, 2021, 2021, 2021, 2021, 2021, 2…\n$ end_mes                          <dbl> 0, 1, 1, 1, 2, 1, 2, 2, 0, 1, 0, 1, 1…\n$ end_bss                          <dbl> 9.455894, 31.622388, 25.525267, 35.36…\n$ end_abd                          <dbl> 20.590252, 33.644791, 26.155480, 37.9…\n$ end_sys                          <dbl> 9.454153, 28.609114, 27.555232, 31.82…\n$ end_coping                       <dbl> 23.41090, 20.56833, 15.20377, 33.2653…\n$ end_emo                          <chr> \"31.980531232702354\", \"43.15496159247…\n$ end_dl                           <chr> \"6.6605585857717573\", \"30.53917899804…\n$ end_wbc                          <dbl> 8.562208, 11.135466, 3.000000, 5.6919…\n$ end_plt                          <dbl> 201, 340, 256, 327, 432, 348, 181, 12…\n$ end_na                           <dbl> 137.3278, 142.2140, 140.0831, 139.158…\n$ end_k                            <dbl> 3.741212, 4.148464, 4.471147, 3.64134…\n$ fake_street                      <chr> \"990 Mohammad Mountain\", \"8512 O'Conn…\n$ fake_city                        <chr> \"North Sigmundville\", \"Port Halstad\",…\n$ fake_state                       <chr> \"New Mexico\", \"Missouri\", \"South Caro…\n$ fake_zip                         <dbl> 96074, 11264, 57246, 31457, 30711, 52…\n```\n:::\n:::\n:::\n\n:::\n\n:::\n\n\n## Recoding\n\n::: panel-tabset\n\n### Problem\n\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-10_936c890f72b7e97ba2d00cc3c9295fd6'}\n\n```{.r .cell-code}\ndf_clean |> \n  count(ethnic)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n  ethnic           n\n  <chr>        <int>\n1 Hispanic         1\n2 NOT hispanic     1\n3 hispamnic        1\n4 hispanic         3\n5 not hispanic    24\n```\n:::\n:::\n\n\n### Solution\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-11_62ec2ce7553cee16bbfc7bccee41dae2'}\n\n```{.r .cell-code  code-line-numbers=\"4-9\"}\ndf_clean <- df_raw |>\n  janitor::clean_names() |> \n  janitor::remove_empty(which = c(\"rows\", \"cols\")) |> \n  mutate(\n    ethnic_clean = case_when(\n      ethnic %in%  c(\"hispanic\", \"Hispanic\", \"hispamnic\") ~ \"hispanic\",\n      ethnic %in%  c(\"NOT hispanic\", \"not hispanic\") ~ \"not hispanic\",\n    )\n  )\n\ndf_clean |> \n  count(ethnic_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 2\n  ethnic_clean     n\n  <chr>        <int>\n1 hispanic         5\n2 not hispanic    25\n```\n:::\n:::\n\n\n### Confirm\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-12_62413173faa50d03ee26042f5b55d6f6'}\n\n```{.r .cell-code}\ndf_clean |> \n  count(ethnic_clean, ethnic)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 3\n  ethnic_clean ethnic           n\n  <chr>        <chr>        <int>\n1 hispanic     Hispanic         1\n2 hispanic     hispamnic        1\n3 hispanic     hispanic         3\n4 not hispanic NOT hispanic     1\n5 not hispanic not hispanic    24\n```\n:::\n:::\n\n:::\n\n## Replace values with missing\n\n\n\n::: panel-tabset\n\n### Problem\n\n::: columns\n\n::: {.column width=\"50%\"}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-13_1b06e3ab557d76b9011427eeceb1f1ae'}\n\n```{.r .cell-code}\ndf_clean |> \n  count(end_na) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 30 × 2\n   end_na     n\n    <dbl> <int>\n 1   -99      1\n 2   133.     1\n 3   135.     1\n 4   135.     1\n 5   136.     1\n 6   137.     1\n 7   137.     1\n 8   138.     1\n 9   138.     1\n10   138.     1\n# ℹ 20 more rows\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-14_68fe07d4296e8dc242b07d76c3030691'}\n\n```{.r .cell-code}\ndf_clean |> \n  ggplot(aes(x = end_na)) +\n  geom_histogram()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-14-1.png){width=960}\n:::\n:::\n:::\n\n:::\n\n### Solution\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-15_e124a6cadc13f4aada4c5a77e199816c'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\ndf_clean <- df_raw |>\n  janitor::clean_names() |> \n  janitor::remove_empty(which = c(\"rows\", \"cols\")) |> \n  mutate(\n    ethnic_clean = case_when(\n      ethnic %in%  c(\"hispanic\", \"Hispanic\", \"hispamnic\") ~ \"hispanic\",\n      ethnic %in%  c(\"NOT hispanic\", \"not hispanic\") ~ \"not hispanic\",\n    ),\n    end_na_clean = na_if(end_na, -99)\n  ) \n```\n:::\n\n\n### Confirm\n\n::: columns\n\n::: {.column width=\"50%\"}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-16_c224e32fc048a7dbbb41d0bffd41aedf'}\n\n```{.r .cell-code}\ndf_clean |> \n  count(end_na, end_na_clean) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 30 × 3\n   end_na end_na_clean     n\n    <dbl>        <dbl> <int>\n 1   -99           NA      1\n 2   133.         133.     1\n 3   135.         135.     1\n 4   135.         135.     1\n 5   136.         136.     1\n 6   137.         137.     1\n 7   137.         137.     1\n 8   138.         138.     1\n 9   138.         138.     1\n10   138.         138.     1\n# ℹ 20 more rows\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-17_3520c68c4aeafd174c90bc9bf38d9ed1'}\n\n```{.r .cell-code}\ndf_clean |> \n  ggplot(aes(x = end_na_clean)) +\n  geom_histogram()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-17-1.png){width=960}\n:::\n:::\n:::\n\n:::\n\n:::\n\n\n## Incorrect variable type\n\n\n::: panel-tabset\n\n### Problem\n\n\n::: columns\n\n::: {.column width=\"50%\"}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-18_0926a7a2d0d662828afe555243256a47'}\n\n```{.r .cell-code}\ndf_raw |> \n  select(end_emo) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 31\nColumns: 1\n$ end_emo <chr> \"31.980531232702354\", \"43.154961592472482\", \"36.88112394645107…\n```\n:::\n:::\n\n<br>\n\n\n::: {.fragment}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-19_1381d47d552e6fad2b40410222363bf5'}\n\n```{.r .cell-code}\nmean(df_raw[[\"end_emo\"]], na.rm = TRUE)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in mean.default(df_raw[[\"end_emo\"]], na.rm = TRUE): argument is not\nnumeric or logical: returning NA\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] NA\n```\n:::\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\" .fragment}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-20_73ccebe3c6981e3856611c6fcbc80396'}\n\n```{.r .cell-code}\ndf_raw[[\"end_emo\"]]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"31.980531232702354\" \"43.154961592472482\" \"36.881123946451076\"\n [4] \"58.670309483569042\" \"58.863864661125419\" \"34.593046073414015\"\n [7] \"63.285059520403976\" \"65.313599031979081\" \"27.976656095216335\"\n[10] \"46.802992507671597\" \"33.122563864954309\" \"49.240520034972612\"\n[13] \"47.050604139781761\" \"54.487640962873577\" \"not done\"          \n[16] NA                   \"49.084529664712441\" \"27.370965295845295\"\n[19] \"60.432712720552317\" \"26.162987564588903\" \"48.329539382030802\"\n[22] \"40.735196376550661\" \"27.000188739872502\" \"57.019771433515629\"\n[25] \"39.783229029414606\" \"52.110256961065794\" \"37.098188331548307\"\n[28] \"39.264033750725694\" \"70.34798440037369\"  \"29.839211956263874\"\n[31] \"42.853436653960713\"\n```\n:::\n:::\n\n:::\n\n:::\n\n\n### Solution\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-21_c268ab29eb495602d0bae4c8035d524e'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\ndf_clean <- df_raw |>\n  janitor::clean_names() |> \n  janitor::remove_empty(which = c(\"rows\", \"cols\")) |> \n  mutate(\n    ethnic_clean = case_when(\n      ethnic %in%  c(\"hispanic\", \"Hispanic\", \"hispamnic\") ~ \"hispanic\",\n      ethnic %in%  c(\"NOT hispanic\", \"not hispanic\") ~ \"not hispanic\",\n    ),\n    end_na_clean = na_if(end_na, -99),\n    end_emo_clean = na_if(end_emo, \"not done\") |> as.numeric()\n  ) \n```\n:::\n\n### Confirm\n\n::: columns\n\n::: {.column width=\"50%\"}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-22_da5b6262efcc57ceea010c98f5f54ead'}\n\n```{.r .cell-code}\ndf_clean |> \n  select(end_emo_clean) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 30\nColumns: 1\n$ end_emo_clean <dbl> 31.98053, 43.15496, 36.88112, 58.67031, 58.86386, 34.593…\n```\n:::\n:::\n\n<br>\n\n\n::: {.fragment}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-23_b8f7476b99d4d985ac584c5e0a0dc2e6'}\n\n```{.r .cell-code}\nmean(df_clean[[\"end_emo_clean\"]], na.rm = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 44.78813\n```\n:::\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\" .fragment}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-24_bb9ed35b3a15572207d609e2adafa676'}\n\n```{.r .cell-code}\ndf_clean |> \n  count(end_emo_clean, end_emo)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 30 × 3\n   end_emo_clean end_emo                n\n           <dbl> <chr>              <int>\n 1          26.2 26.162987564588903     1\n 2          27.0 27.000188739872502     1\n 3          27.4 27.370965295845295     1\n 4          28.0 27.976656095216335     1\n 5          29.8 29.839211956263874     1\n 6          32.0 31.980531232702354     1\n 7          33.1 33.122563864954309     1\n 8          34.6 34.593046073414015     1\n 9          36.9 36.881123946451076     1\n10          37.1 37.098188331548307     1\n# ℹ 20 more rows\n```\n:::\n:::\n\n:::\n\n:::\n\n:::\n\n\n## Correcting dates\n\n::: panel-tabset\n\n### Problem\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-25_75d6f19914b005daf7811495fca2b0fd'}\n\n```{.r .cell-code}\ndf_raw |> \n  select(start_date) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 31\nColumns: 1\n$ start_date <dbl> 44208, 44215, 44230, 44245, 44255, 44259, 44264, 44999, 442…\n```\n:::\n:::\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-26_5a71de8a91bfa2d1e93d03b123eee26a'}\n\n```{.r .cell-code}\ndf_raw[[\"start_date\"]]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] 44208 44215 44230 44245 44255 44259 44264 44999 44276 44278 44297 44308\n[13] 44313 44318 44324    NA 44329 44332 44346 44358 44370 44383 44391 44397\n[25] 44412 44425 44434 44444 44461 44475 44500\n```\n:::\n:::\n\n### Solution\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-27_e8b220f2bb2e03df0ecf1770824834fa'}\n\n```{.r .cell-code  code-line-numbers=\"11\"}\ndf_clean <- df_raw |>\n  janitor::clean_names() |> \n  janitor::remove_empty(which = c(\"rows\", \"cols\")) |> \n  mutate(\n    ethnic_clean = case_when(\n      ethnic %in%  c(\"hispanic\", \"Hispanic\", \"hispamnic\") ~ \"hispanic\",\n      ethnic %in%  c(\"NOT hispanic\", \"not hispanic\") ~ \"not hispanic\",\n    ),\n    end_na_clean = na_if(end_na, -99),\n    end_emo_clean = na_if(end_emo, \"not done\") |> as.numeric(),\n    start_date_clean = janitor::convert_to_date(start_date)\n  ) \n```\n:::\n\n### Confirm\n\n::: columns\n\n::: {.column width=\"50%\"}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-28_2d730fab09ee793dee89be49c84b2335'}\n\n```{.r .cell-code}\ndf_clean |> \n  select(start_date, start_date_clean) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 30\nColumns: 2\n$ start_date       <dbl> 44208, 44215, 44230, 44245, 44255, 44259, 44264, 4499…\n$ start_date_clean <date> 2021-01-12, 2021-01-19, 2021-02-03, 2021-02-18, 2021…\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-29_5737cb1835e67cfa5ff52aca5e7988c7'}\n\n```{.r .cell-code}\ndf_clean |> \n  count(start_date, start_date_clean) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 30 × 3\n   start_date start_date_clean     n\n        <dbl> <date>           <int>\n 1      44208 2021-01-12           1\n 2      44215 2021-01-19           1\n 3      44230 2021-02-03           1\n 4      44245 2021-02-18           1\n 5      44255 2021-02-28           1\n 6      44259 2021-03-04           1\n 7      44264 2021-03-09           1\n 8      44276 2021-03-21           1\n 9      44278 2021-03-23           1\n10      44297 2021-04-11           1\n# ℹ 20 more rows\n```\n:::\n:::\n\n:::\n\n:::\n\n:::\n\n## Extracting numbers from text\n\n::: panel-tabset\n\n### Problem\n\n\n::: columns\n\n::: {.column width=\"50%\"}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-30_1d97bbbdb276c3ca70ecfb146e2344a7'}\n\n```{.r .cell-code}\ndf_raw |> \n  select(start_na) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 31\nColumns: 1\n$ start_na <chr> \"137mmol/L\", \"142mmol/L\", \"140mmol/L\", \"139mmol/L\", \"144mmol/…\n```\n:::\n:::\n\n<br>\n\n\n::: {.fragment}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-31_d291743f732e6a9882dd22516644d695'}\n\n```{.r .cell-code}\nmean(df_raw[[\"start_na\"]], na.rm = TRUE)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in mean.default(df_raw[[\"start_na\"]], na.rm = TRUE): argument is not\nnumeric or logical: returning NA\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] NA\n```\n:::\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\" .fragment}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-32_bc522b4ebf28166293759fcb209c6247'}\n\n```{.r .cell-code}\ndf_raw[[\"start_na\"]]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"137mmol/L\" \"142mmol/L\" \"140mmol/L\" \"139mmol/L\" \"144mmol/L\" \"145mmol/L\"\n [7] \"142mmol/L\" \"138mmol/L\" \"140mmol/L\" \"137mmol/L\" \"143mmol/L\" \"136mmol/L\"\n[13] \"135mmol/L\" \"141mmol/L\" \"133mmol/L\" NA          \"135mmol/L\" \"143mmol/L\"\n[19] \"136mmol/L\" \"144mmol/L\" \"145mmol/L\" \"140mmol/L\" \"141mmol/L\" \"142mmol/L\"\n[25] \"138mmol/L\" \"139mmol/L\" \"142mmol/L\" \"144mmol/L\" \"139mmol/L\" \"138mmol/L\"\n[31] \"140mmol/L\"\n```\n:::\n:::\n\n:::\n\n:::\n\n### Solution\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-33_9cb74d7f0fb0da1073320f763607d959'}\n\n```{.r .cell-code  code-line-numbers=\"11\"}\ndf_clean <- df_raw |>\n  janitor::clean_names() |> \n  janitor::remove_empty(which = c(\"rows\", \"cols\")) |> \n  mutate(\n    ethnic_clean = case_when(\n      ethnic %in%  c(\"hispanic\", \"Hispanic\", \"hispamnic\") ~ \"hispanic\",\n      ethnic %in%  c(\"NOT hispanic\", \"not hispanic\") ~ \"not hispanic\",\n    ),\n    end_na_clean = na_if(end_na, -99),\n    end_emo_clean = na_if(end_emo, \"not done\") |> as.numeric(),\n    start_na_clean = parse_number(start_na)\n  ) \n```\n:::\n\n### Confirm\n\n::: columns\n\n::: {.column width=\"50%\"}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-34_5b4ca930b2891df5484f334f0a21420d'}\n\n```{.r .cell-code}\ndf_clean |> \n  select(start_na_clean) |> \n  glimpse()\n```\n:::\n\n<br>\n\n\n::: {.fragment}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-35_69989f6cb43a435cf479af5bed956a6b'}\n\n```{.r .cell-code}\nmean(df_clean[[\"start_na_clean\"]], na.rm = TRUE)\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\" .fragment}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-36_f2fe43f1d1f131f0b81bc5c47179ace4'}\n\n```{.r .cell-code}\ndf_clean |> \n  count(start_na_clean, start_na)\n```\n:::\n\n:::\n\n:::\n\n:::\n\n\n\n## Character variable should be a factor\n\n\n::: panel-tabset\n\n### Problem\n\n\n::: columns\n\n::: {.column width=\"35%\"}\n\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-37_1f87051d48e0566b65d9cff70074c63b'}\n\n```{.r .cell-code}\ndf_clean |> \n  count(treatment)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  treatment     n\n  <chr>     <int>\n1 oza          10\n2 upa          10\n3 uste         10\n```\n:::\n:::\n\n<br>\n\n::: {.fragment}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-38_8629fe8b8ee795f82242b29fdd3fb05e'}\n\n```{.r .cell-code}\ndf_clean |> \n  count(ethnic_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 2\n  ethnic_clean     n\n  <chr>        <int>\n1 hispanic         5\n2 not hispanic    25\n```\n:::\n:::\n:::\n\n\n:::\n\n\n\n::: {.column width=\"65%\" .fragment}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-39_71dcaaedb5a60df05a7c215445ec2cf4'}\n\n```{.r .cell-code}\ndf_clean |> \n  select(treatment, ethnic_clean) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 30\nColumns: 2\n$ treatment    <chr> \"upa\", \"uste\", \"oza\", \"upa\", \"oza\", \"uste\", \"uste\", \"oza\"…\n$ ethnic_clean <chr> \"hispanic\", \"not hispanic\", \"not hispanic\", \"not hispanic…\n```\n:::\n:::\n\n\n::: {.fragment}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-40_256b45a7151965b8200e11ed04fd811a'}\n\n```{.r .cell-code}\ndf_clean |> \n  select(treatment, ethnic_clean) |> \n  tbl_summary(by = treatment)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"dbiuvksrhf\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#dbiuvksrhf table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#dbiuvksrhf thead, #dbiuvksrhf tbody, #dbiuvksrhf tfoot, #dbiuvksrhf tr, #dbiuvksrhf td, #dbiuvksrhf th {\n  border-style: none;\n}\n\n#dbiuvksrhf p {\n  margin: 0;\n  padding: 0;\n}\n\n#dbiuvksrhf .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#dbiuvksrhf .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#dbiuvksrhf .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#dbiuvksrhf .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#dbiuvksrhf .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#dbiuvksrhf .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dbiuvksrhf .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#dbiuvksrhf .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#dbiuvksrhf .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#dbiuvksrhf .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#dbiuvksrhf .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#dbiuvksrhf .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#dbiuvksrhf .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#dbiuvksrhf .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#dbiuvksrhf .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#dbiuvksrhf .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#dbiuvksrhf .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#dbiuvksrhf .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#dbiuvksrhf .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dbiuvksrhf .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#dbiuvksrhf .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#dbiuvksrhf .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#dbiuvksrhf .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dbiuvksrhf .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#dbiuvksrhf .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#dbiuvksrhf .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dbiuvksrhf .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dbiuvksrhf .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#dbiuvksrhf .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dbiuvksrhf .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#dbiuvksrhf .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dbiuvksrhf .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#dbiuvksrhf .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dbiuvksrhf .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#dbiuvksrhf .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dbiuvksrhf .gt_left {\n  text-align: left;\n}\n\n#dbiuvksrhf .gt_center {\n  text-align: center;\n}\n\n#dbiuvksrhf .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#dbiuvksrhf .gt_font_normal {\n  font-weight: normal;\n}\n\n#dbiuvksrhf .gt_font_bold {\n  font-weight: bold;\n}\n\n#dbiuvksrhf .gt_font_italic {\n  font-style: italic;\n}\n\n#dbiuvksrhf .gt_super {\n  font-size: 65%;\n}\n\n#dbiuvksrhf .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#dbiuvksrhf .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#dbiuvksrhf .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#dbiuvksrhf .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#dbiuvksrhf .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#dbiuvksrhf .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#dbiuvksrhf .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Characteristic&lt;/strong&gt;\"><strong>Characteristic</strong></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;oza&lt;/strong&gt;, N = 10&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>oza</strong>, N = 10<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;upa&lt;/strong&gt;, N = 10&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>upa</strong>, N = 10<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;uste&lt;/strong&gt;, N = 10&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>uste</strong>, N = 10<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">ethnic_clean</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\"></td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\"></td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\"></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    hispanic</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">4 (40%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">1 (10%)</td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\">0 (0%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    not hispanic</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">6 (60%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">9 (90%)</td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\">10 (100%)</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"4\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span> n (%)</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n:::\n:::\n:::\n\n:::\n\n:::\n\n\n### Solution\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-41_704bc9b1cc0907e2cbf7d5d2fa093bea'}\n\n```{.r .cell-code  code-line-numbers=\"8,11\"}\ndf_clean <- df_raw |>\n  janitor::clean_names() |> \n  janitor::remove_empty(which = c(\"rows\", \"cols\")) |> \n  mutate(\n    ethnic_clean = case_when(\n      ethnic %in%  c(\"hispanic\", \"Hispanic\", \"hispamnic\") ~ \"hispanic\",\n      ethnic %in%  c(\"NOT hispanic\", \"not hispanic\") ~ \"not hispanic\",\n    ) |> fct_infreq(),\n    end_na_clean = na_if(end_na, -99),\n    end_emo_clean = na_if(end_emo, \"not done\") |> as.numeric(),\n    treatment = fct_relevel(treatment, \"upa\", \"uste\", \"oza\")\n  ) \n```\n:::\n\n<br>\n\nSee the [forcats package](https://forcats.tidyverse.org/) for other factor handling solutions.\n\n### Confirm\n\n::: columns\n\n::: {.column width=\"35%\"}\n\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-42_56e24bb68441fe0d78b97230712433a3'}\n\n```{.r .cell-code}\ndf_clean |> \n  count(treatment)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  treatment     n\n  <fct>     <int>\n1 upa          10\n2 uste         10\n3 oza          10\n```\n:::\n:::\n\n<br>\n\n::: {.fragment}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-43_5cd078ce1bc544d7d062fbbb3096564f'}\n\n```{.r .cell-code}\ndf_clean |> \n  count(ethnic_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 2\n  ethnic_clean     n\n  <fct>        <int>\n1 not hispanic    25\n2 hispanic         5\n```\n:::\n:::\n:::\n\n\n:::\n\n\n\n::: {.column width=\"65%\" .fragment}\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-44_3d1b3cb1d86109c7dc78c6c463cd212f'}\n\n```{.r .cell-code}\ndf_clean |> \n  select(treatment, ethnic_clean) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 30\nColumns: 2\n$ treatment    <fct> upa, uste, oza, upa, oza, uste, uste, oza, upa, oza, upa,…\n$ ethnic_clean <fct> hispanic, not hispanic, not hispanic, not hispanic, not h…\n```\n:::\n:::\n\n\n::: {.fragment}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-45_80f4a268aa23f18d1c9a7998db33e5c4'}\n\n```{.r .cell-code}\ndf_clean |> \n  select(treatment, ethnic_clean) |> \n  tbl_summary(by = treatment)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"iarwvbhqej\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#iarwvbhqej table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#iarwvbhqej thead, #iarwvbhqej tbody, #iarwvbhqej tfoot, #iarwvbhqej tr, #iarwvbhqej td, #iarwvbhqej th {\n  border-style: none;\n}\n\n#iarwvbhqej p {\n  margin: 0;\n  padding: 0;\n}\n\n#iarwvbhqej .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#iarwvbhqej .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#iarwvbhqej .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#iarwvbhqej .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#iarwvbhqej .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#iarwvbhqej .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#iarwvbhqej .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#iarwvbhqej .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#iarwvbhqej .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#iarwvbhqej .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#iarwvbhqej .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#iarwvbhqej .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#iarwvbhqej .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#iarwvbhqej .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#iarwvbhqej .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#iarwvbhqej .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#iarwvbhqej .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#iarwvbhqej .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#iarwvbhqej .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#iarwvbhqej .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#iarwvbhqej .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#iarwvbhqej .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#iarwvbhqej .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#iarwvbhqej .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#iarwvbhqej .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#iarwvbhqej .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#iarwvbhqej .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#iarwvbhqej .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#iarwvbhqej .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#iarwvbhqej .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#iarwvbhqej .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#iarwvbhqej .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#iarwvbhqej .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#iarwvbhqej .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#iarwvbhqej .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#iarwvbhqej .gt_left {\n  text-align: left;\n}\n\n#iarwvbhqej .gt_center {\n  text-align: center;\n}\n\n#iarwvbhqej .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#iarwvbhqej .gt_font_normal {\n  font-weight: normal;\n}\n\n#iarwvbhqej .gt_font_bold {\n  font-weight: bold;\n}\n\n#iarwvbhqej .gt_font_italic {\n  font-style: italic;\n}\n\n#iarwvbhqej .gt_super {\n  font-size: 65%;\n}\n\n#iarwvbhqej .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#iarwvbhqej .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#iarwvbhqej .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#iarwvbhqej .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#iarwvbhqej .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#iarwvbhqej .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#iarwvbhqej .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Characteristic&lt;/strong&gt;\"><strong>Characteristic</strong></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;upa&lt;/strong&gt;, N = 10&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>upa</strong>, N = 10<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;uste&lt;/strong&gt;, N = 10&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>uste</strong>, N = 10<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;oza&lt;/strong&gt;, N = 10&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>oza</strong>, N = 10<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">ethnic_clean</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\"></td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\"></td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\"></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    not hispanic</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">9 (90%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">10 (100%)</td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\">6 (60%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    hispanic</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">1 (10%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">0 (0%)</td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\">4 (40%)</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"4\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span> n (%)</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n:::\n:::\n:::\n\n:::\n\n:::\n\n:::\n\n\n## Separating values\n\n\n::: panel-tabset\n\n### Problem\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-46_998706bbf9ab4a97dbe4a181dcde2a91'}\n\n```{.r .cell-code}\ndf_clean |> \n  select(start_bp) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 30\nColumns: 1\n$ start_bp <chr> \"114/72\", \"132/86\", \"124/92\", \"144/83\", \"122/78\", \"121/80\", \"…\n```\n:::\n:::\n\n<br>\n\n::: {.fragment}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-47_07adf877bc44817be14ff5605b0c6e67'}\n\n```{.r .cell-code}\nmean(df_clean[[\"start_bp\"]], na.rm = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] NA\n```\n:::\n:::\n:::\n<br>\n\n\n::: {.fragment}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-48_51cec346188e64af195677aad8f66f1f'}\n\n```{.r .cell-code}\ndf_clean[[\"start_bp\"]]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"114/72\" \"132/86\" \"124/92\" \"144/83\" \"122/78\" \"121/80\" \"133/74\" \"116/73\"\n [9] \"118/66\" \"122/78\" \"126/82\" \"114/68\" \"118/73\" \"106/59\" \"112/69\" \"114/76\"\n[17] \"124/80\" \"120/68\" \"119/77\" \"116/74\" \"121/80\" \"112/58\" \"117/67\" \"118/73\"\n[25] \"116/74\" \"126/84\" \"144/96\" \"120/84\" \"115/75\" \"142/92\"\n```\n:::\n:::\n:::\n\n### Solution\n\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-49_a9a794b78a98a8838341ff036b3b2dcb'}\n\n```{.r .cell-code  code-line-numbers=\"13,14\"}\ndf_clean <- df_raw |>\n  janitor::clean_names() |> \n  janitor::remove_empty(which = c(\"rows\", \"cols\")) |> \n  mutate(\n    ethnic_clean = case_when(\n      ethnic %in%  c(\"hispanic\", \"Hispanic\", \"hispamnic\") ~ \"hispanic\",\n      ethnic %in%  c(\"NOT hispanic\", \"not hispanic\") ~ \"not hispanic\",\n    ) |> fct_infreq(),\n    end_na_clean = na_if(end_na, -99),\n    end_emo_clean = na_if(end_emo, \"not done\") |> as.numeric(),\n    treatment = fct_relevel(treatment, \"upa\", \"uste\", \"oza\")\n    ) |>  \n  separate_wider_delim(start_bp, delim =\"/\", names = c(\"bp_systolic\", \"bp_diastolic\"), cols_remove = FALSE) |> \n  mutate(across(c(bp_systolic, bp_diastolic), as.numeric)) \n```\n:::\n\n### Confirm\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-50_e81e4cdfe5d712a780187c4ff7799e27'}\n\n```{.r .cell-code}\ndf_clean |> \n  select(start_bp, bp_systolic, bp_diastolic) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 30\nColumns: 3\n$ start_bp     <chr> \"114/72\", \"132/86\", \"124/92\", \"144/83\", \"122/78\", \"121/80…\n$ bp_systolic  <dbl> 114, 132, 124, 144, 122, 121, 133, 116, 118, 122, 126, 11…\n$ bp_diastolic <dbl> 72, 86, 92, 83, 78, 80, 74, 73, 66, 78, 82, 68, 73, 59, 6…\n```\n:::\n:::\n\n\n::: {.fragment}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-51_afff33578b633e5f10025aed4d393c1b'}\n\n```{.r .cell-code}\nmean(df_clean[[\"bp_systolic\"]], na.rm = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 121.5333\n```\n:::\n\n```{.r .cell-code}\nmean(df_clean[[\"bp_diastolic\"]], na.rm = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 76.36667\n```\n:::\n:::\n:::\n\n::: {.fragment}\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-52_669125ba3a62601d4853932a1e6f3169'}\n\n```{.r .cell-code}\ndf_clean[[\"bp_systolic\"]]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] 114 132 124 144 122 121 133 116 118 122 126 114 118 106 112 114 124 120 119\n[20] 116 121 112 117 118 116 126 144 120 115 142\n```\n:::\n\n```{.r .cell-code}\ndf_clean[[\"bp_diastolic\"]]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] 72 86 92 83 78 80 74 73 66 78 82 68 73 59 69 76 80 68 77 74 80 58 67 73 74\n[26] 84 96 84 75 92\n```\n:::\n:::\n:::\n\n:::\n\n\n## Assigning labels\n\n\n::: panel-tabset\n\n### Problem\n\nWhat does anything mean?\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-53_9b95e004d6b16c4dfea7d285c24d9acf'}\n\n```{.r .cell-code}\nview(df_clean)\n```\n:::\n\ninsert screenshot\n\n### Solution 1\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-54_7b4b5d9f3245faceb45248e533665b8b'}\n\n```{.r .cell-code}\n# first import codebook\ndf_codebook <- read_excel(\n  path = here(\"data\", \"messy_uc.xlsx\"),\n  sheet = \"Codebook\"\n)\ndf_codebook\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 5\n   Variable       Details                                      Units Range ...5 \n   <chr>          <chr>                                        <chr> <chr> <chr>\n 1 pat_id         Patient Identifier                           digi… 001-… <NA> \n 2 treatment      Treatment for UC                             <NA>  upad… <NA> \n 3 start_date     Date of start of treatment                   digi… YYYY… <NA> \n 4 ethnic         Ethnicity - hispanic or not hispanic         <NA>  hisp… <NA> \n 5 race           Race - one of 7 choices                      <NA>  cauc… <NA> \n 6 dob            date of birth                                digi… YYYY… <NA> \n 7 start_bp       blood pressure at start - systolic/diastolic mm Hg syst… <NA> \n 8 pre/post_wt_kg weight in kilograms at start/end             kilo… 48-1… <NA> \n 9 start_mes      Mayo endoscopic Score at start of treatment  poin… 0-3   <NA> \n10 start_bss      Bowel symptom score at start                 poin… 0-100 QOL …\n# ℹ 23 more rows\n```\n:::\n:::\n\n\n### Solution 2\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-55_9a8186a96e52f260101169df077623fe'}\n\n```{.r .cell-code}\n# second create a named vector of variable names and variable labels\nvec_variables <- df_codebook |> \n  select(Variable, Details) |> \n  deframe()\n\nvec_variables\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                                        pat_id \n                          \"Patient Identifier\" \n                                     treatment \n                            \"Treatment for UC\" \n                                    start_date \n                  \"Date of start of treatment\" \n                                        ethnic \n        \"Ethnicity - hispanic or not hispanic\" \n                                          race \n                     \"Race - one of 7 choices\" \n                                           dob \n                               \"date of birth\" \n                                      start_bp \n\"blood pressure at start - systolic/diastolic\" \n                                pre/post_wt_kg \n            \"weight in kilograms at start/end\" \n                                     start_mes \n \"Mayo endoscopic Score at start of treatment\" \n                                     start_bss \n                \"Bowel symptom score at start\" \n                                     start_abd \n            \"Abdominal symptom score at start\" \n                                     start_sys \n             \"Systemic symptom score at start\" \n                                  start_coping \n                       \"Coping score at start\" \n                                     start_emo \n            \"Emotional symptom score at start\" \n                                      start_dl \n       \"Impact on Daily living score at start\" \n                                     start_wbc \n    \"White blood cell count in blood at start\" \n                                     start_plt \n            \"Platelet count in blood at start\" \n                                      start_na \n              \"Sodium level in serum at start\" \n                                       start_k \n           \"Potassium level in serum at start\" \n                                     end_month \n                          \"Month of end visit\" \n                                       end_day \n                            \"Day of end visit\" \n                                      end_year \n                           \"Year of end visit\" \n                                       end_mes \n   \"Mayo endoscopic Score at end of treatment\" \n                                       end_bss \n                  \"Bowel symptom score at end\" \n                                       end_abd \n              \"Abdominal symptom score at end\" \n                                       end_sys \n               \"Systemic symptom score at end\" \n                                    end_coping \n                         \"Coping score at end\" \n                                       end_emo \n              \"Emotional symptom score at end\" \n                                        end_dl \n         \"Impact on Daily living score at end\" \n                                       end_wbc \n      \"White blood cell count in blood at end\" \n                                       end_plt \n              \"Platelet count in blood at end\" \n                                        end_na \n                \"Sodium level in serum at end\" \n                                         end_k \n             \"Potassium level in serum at end\" \n```\n:::\n:::\n\n### Solution 3\n\n\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-56_e7504ae73e1387f554a2d0e980f7977a'}\n\n```{.r .cell-code  code-line-numbers=\"16,17|18,19,20,21,22,23,24,25\"}\n# assign labels to the data set\ndf_clean <- df_raw |>\n  janitor::clean_names() |> \n  janitor::remove_empty(which = c(\"rows\", \"cols\")) |> \n  mutate(\n    ethnic_clean = case_when(\n      ethnic %in%  c(\"hispanic\", \"Hispanic\", \"hispamnic\") ~ \"hispanic\",\n      ethnic %in%  c(\"NOT hispanic\", \"not hispanic\") ~ \"not hispanic\",\n    ) |> fct_infreq(),\n    end_na_clean = na_if(end_na, -99),\n    end_emo_clean = na_if(end_emo, \"not done\") |> as.numeric(),\n    treatment = fct_relevel(treatment, \"upa\", \"uste\", \"oza\")\n    ) |>  \n  separate(start_bp, into = c(\"bp_systolic\", \"bp_diastolic\"), sep =\"/\", remove = FALSE) |> \n  mutate(across(c(bp_systolic, bp_diastolic), as.numeric)) |> \n  # assign labels to all variables from the codebook\n  labelled::set_variable_labels(!!!vec_variables, .strict = FALSE) |> \n  # assign labels to new derived variables that did not exist in the code book\n  labelled::set_variable_labels(\n    ethnic_clean = \"Ethnicity\",\n    end_na_clean = \"Sodium level in serum at end\",\n    end_emo_clean = \"Emotional symptom score at end\",\n    bp_systolic = \"Systolic blood pressure\",\n    bp_diastolic = \"Diastolic blood pressure\"\n  )\n```\n:::\n\n### Confirm 1\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-57_9add73f15e1d334f4bf2bc9ba95b6a60'}\n\n```{.r .cell-code}\n# view entire data set\ndf_clean |> view()\n```\n:::\n\ninsert screenshot\n\n### Confirm 2\n\n::: {.cell hash='index_cache/revealjs/unnamed-chunk-58_254fc3b03f8f413ab4295ea0d28d27af'}\n\n```{.r .cell-code}\n# view structure of data frame\ndf_clean |> str()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [30 × 42] (S3: tbl_df/tbl/data.frame)\n $ pat_id                          : chr [1:30] \"001\" \"002\" \"003\" \"004\" ...\n  ..- attr(*, \"label\")= chr \"Patient Identifier\"\n $ treatment                       : Factor w/ 3 levels \"upa\",\"uste\",\"oza\": 1 2 3 1 3 2 2 3 1 3 ...\n  ..- attr(*, \"label\")= chr \"Treatment for UC\"\n $ start_date                      : num [1:30] 44208 44215 44230 44245 44255 ...\n  ..- attr(*, \"label\")= chr \"Date of start of treatment\"\n $ ethnic                          : chr [1:30] \"hispanic\" \"not hispanic\" \"not hispanic\" \"not hispanic\" ...\n  ..- attr(*, \"label\")= chr \"Ethnicity - hispanic or not hispanic\"\n $ race                            : chr [1:30] \"Caucasian\" \"Caucasian\" \"African-American\" \"Caucasian\" ...\n  ..- attr(*, \"label\")= chr \"Race - one of 7 choices\"\n $ dob                             : POSIXct[1:30], format: \"2005-01-07\" \"1937-04-13\" ...\n $ start_bp                        : chr [1:30] \"114/72\" \"132/86\" \"124/92\" \"144/83\" ...\n  ..- attr(*, \"label\")= chr \"blood pressure at start - systolic/diastolic\"\n $ bp_systolic                     : num [1:30] 114 132 124 144 122 121 133 116 118 122 ...\n  ..- attr(*, \"label\")= chr \"Systolic blood pressure\"\n $ bp_diastolic                    : num [1:30] 72 86 92 83 78 80 74 73 66 78 ...\n  ..- attr(*, \"label\")= chr \"Diastolic blood pressure\"\n $ pre_post_wt_kg                  : chr [1:30] \"84/82\" \"77/77\" \"74/75\" \"66/65\" ...\n $ start_mes                       : num [1:30] 3 2 1 3 3 2 3 3 2 3 ...\n  ..- attr(*, \"label\")= chr \"Mayo endoscopic Score at start of treatment\"\n $ start_bss                       : num [1:30] 75.5 53.6 25.5 79.4 79.5 ...\n  ..- attr(*, \"label\")= chr \"Bowel symptom score at start\"\n $ start_abd_score                 : num [1:30] 80.6 53.6 26.2 77.9 78.4 ...\n $ start_sys                       : num [1:30] 81.5 52.6 27.6 79.8 79.2 ...\n  ..- attr(*, \"label\")= chr \"Systemic symptom score at start\"\n $ start_coping                    : num [1:30] 50.4 29.6 15.2 51.3 43.1 ...\n  ..- attr(*, \"label\")= chr \"Coping score at start\"\n $ start_emo                       : num [1:30] 73.3 55.7 36.6 80.8 72.5 ...\n  ..- attr(*, \"label\")= chr \"Emotional symptom score at start\"\n $ daily_life_impact_score_at_start: num [1:30] 86.9 56.1 31.4 84.9 87.3 ...\n $ start_wbc                       : num [1:30] 8.2 10.1 5.5 4.7 8.9 9.3 5.6 9.7 8.3 7.6 ...\n  ..- attr(*, \"label\")= chr \"White blood cell count in blood at start\"\n $ start_plt                       : chr [1:30] \"273K/microL\" \"414K/microL\" \"323K/microL\" \"389K/microL\" ...\n  ..- attr(*, \"label\")= chr \"Platelet count in blood at start\"\n $ start_na                        : chr [1:30] \"137mmol/L\" \"142mmol/L\" \"140mmol/L\" \"139mmol/L\" ...\n  ..- attr(*, \"label\")= chr \"Sodium level in serum at start\"\n $ start_k                         : chr [1:30] \"3.7\" \"4.0999999999999996\" \"4.3\" \"3.5\" ...\n  ..- attr(*, \"label\")= chr \"Potassium level in serum at start\"\n $ end_month                       : num [1:30] 6 6 7 7 7 8 8 8 8 8 ...\n  ..- attr(*, \"label\")= chr \"Month of end visit\"\n $ end_day                         : num [1:30] 14 21 6 22 30 4 10 15 22 26 ...\n  ..- attr(*, \"label\")= chr \"Day of end visit\"\n $ end_year                        : num [1:30] 2021 2021 2021 2021 2021 ...\n  ..- attr(*, \"label\")= chr \"Year of end visit\"\n $ end_mes                         : num [1:30] 0 1 1 1 2 1 2 2 0 1 ...\n  ..- attr(*, \"label\")= chr \"Mayo endoscopic Score at end of treatment\"\n $ end_bss                         : num [1:30] 9.46 31.62 25.53 35.37 57.53 ...\n  ..- attr(*, \"label\")= chr \"Bowel symptom score at end\"\n $ end_abd                         : num [1:30] 20.6 33.6 26.2 37.9 58.4 ...\n  ..- attr(*, \"label\")= chr \"Abdominal symptom score at end\"\n $ end_sys                         : num [1:30] 9.45 28.61 27.56 31.82 55.19 ...\n  ..- attr(*, \"label\")= chr \"Systemic symptom score at end\"\n $ end_coping                      : num [1:30] 23.4 20.6 15.2 33.3 34.1 ...\n  ..- attr(*, \"label\")= chr \"Coping score at end\"\n $ end_emo                         : chr [1:30] \"31.980531232702354\" \"43.154961592472482\" \"36.881123946451076\" \"58.670309483569042\" ...\n  ..- attr(*, \"label\")= chr \"Emotional symptom score at end\"\n $ end_dl                          : chr [1:30] \"6.6605585857717573\" \"30.539178998046562\" \"32.798667784920319\" \"33.781373664703942\" ...\n  ..- attr(*, \"label\")= chr \"Impact on Daily living score at end\"\n $ end_wbc                         : num [1:30] 8.56 11.14 3 5.69 4.8 ...\n  ..- attr(*, \"label\")= chr \"White blood cell count in blood at end\"\n $ end_plt                         : num [1:30] 201 340 256 327 432 348 181 128 135 238 ...\n  ..- attr(*, \"label\")= chr \"Platelet count in blood at end\"\n $ end_na                          : num [1:30] 137 142 140 139 144 ...\n  ..- attr(*, \"label\")= chr \"Sodium level in serum at end\"\n $ end_k                           : num [1:30] 3.74 4.15 4.47 3.64 4.21 ...\n  ..- attr(*, \"label\")= chr \"Potassium level in serum at end\"\n $ fake_street                     : chr [1:30] \"990 Mohammad Mountain\" \"8512 O'Connell Valley\" \"777 Ledner Mall\" \"690 Andres Village\" ...\n $ fake_city                       : chr [1:30] \"North Sigmundville\" \"Port Halstad\" \"Croninton\" \"South Isaac\" ...\n $ fake_state                      : chr [1:30] \"New Mexico\" \"Missouri\" \"South Carolina\" \"Montana\" ...\n $ fake_zip                        : num [1:30] 96074 11264 57246 31457 30711 ...\n $ ethnic_clean                    : Factor w/ 2 levels \"not hispanic\",..: 2 1 1 1 1 1 1 2 1 2 ...\n  ..- attr(*, \"label\")= chr \"Ethnicity\"\n $ end_na_clean                    : num [1:30] 137 142 140 139 144 ...\n  ..- attr(*, \"label\")= chr \"Sodium level in serum at end\"\n $ end_emo_clean                   : num [1:30] 32 43.2 36.9 58.7 58.9 ...\n  ..- attr(*, \"label\")= chr \"Emotional symptom score at end\"\n```\n:::\n:::\n\n:::\n\n# Wrangling your Data\n\n## Deciding on the Unit of Observation\n\nImage\n\n## Is it the Patient?\n\n- Patient over time\n- Outcome colectomy\n- labs over time\n \n## Is it the Visit/Encounter?\n\n- Patient over time\n- Outcome colectomy\n- labs over time\n\n## Reshaping your data with tidyr\n\n## Pivoting Longer (common)\n\n- Visit Dates/Measures\n\n- Your Turn (Exercise)\n\n## Pivoting Wider\n\n# Filling in Unobserved Dates/Times with padr\n\n## Padding unobserved dates (weekends?)\n\n## Padding unovserved times\n\n## Joins of data from different sources\n\n## Local Demographics with CDC SVI data (one to one)\n\n## Patient Demographics with Lab results (one to many)\n\n\n## Thank you!\n\n🙏 [Click here to submit workshop feedback](https://forms.gle/kvEirN7sJmavem8q6){target=\"_blank\"}\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}